{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\elayne\\\\Documents\\\\hotelIfba-front\\\\src\\\\contexts\\\\auth.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useState, useEffect } from 'react';\nimport { login } from '../services/api/users';\nimport axios from '../config/axios';\nimport swal from 'sweetalert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Context = /*#__PURE__*/createContext();\n\nfunction AuthProvider({\n  children\n}) {\n  _s();\n\n  const [authenticated, setAuthenticated] = useState(false);\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      axios.defaults.headers.Authorization = `Token ${JSON.parse(token)}`;\n      setAuthenticated(true);\n    }\n  }, []);\n\n  async function handleLogin(username, password) {\n    async function getItems() {\n      try {\n        const {\n          data: {\n            token,\n            user_id\n          }\n        } = await login(credentials);\n        localStorage.setItem('token', JSON.stringify(token));\n        localStorage.setItem('id', user_id);\n        axios.defaults.headers.Authorization = `Token ${token}`;\n        setAuthenticated(true);\n      } catch (error) {\n        swal(\"Opis ... ocorreu um erro\", \"\", \"error\");\n        return;\n      }\n    }\n\n    getItems(); // let credentials = { username, password };\n    // const { data: { token,  user_id} }  = await login(credentials)\n    // // if(token === null)\n    // // {\n    // //     swal(\"Falha durante autenticação\");\n    // //     return;\n    // // }\n    // localStorage.setItem('token', JSON.stringify(token))\n    // localStorage.setItem('id', user_id)\n    // axios.defaults.headers.Authorization = `Token ${token}`;\n    // setAuthenticated(true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: {\n      authenticated,\n      handleLogin\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AuthProvider, \"+nyo0O1WmcKNkwQZH3xRKUoDvQ8=\");\n\n_c = AuthProvider;\nexport { Context, AuthProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["C:/Users/elayne/Documents/hotelIfba-front/src/contexts/auth.js"],"names":["React","createContext","useState","useEffect","login","axios","swal","Context","AuthProvider","children","authenticated","setAuthenticated","token","localStorage","getItem","defaults","headers","Authorization","JSON","parse","handleLogin","username","password","getItems","data","user_id","credentials","setItem","stringify","error"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,QAA/B,EAAyCC,SAAzC,QAA0D,OAA1D;AACA,SAASC,KAAT,QAAsB,uBAAtB;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AACA,OAAOC,IAAP,MAAiB,YAAjB;;AAEA,MAAMC,OAAO,gBAAGN,aAAa,EAA7B;;AAEA,SAASO,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAmC;AAAA;;AAE/B,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCT,QAAQ,CAAC,KAAD,CAAlD;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMS,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AAEA,QAAIF,KAAJ,EAAW;AACTP,MAAAA,KAAK,CAACU,QAAN,CAAeC,OAAf,CAAuBC,aAAvB,GAAwC,SAAQC,IAAI,CAACC,KAAL,CAAWP,KAAX,CAAkB,EAAlE;AACAD,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD;AAEJ,GARQ,EAQN,EARM,CAAT;;AAWA,iBAAeS,WAAf,CAA2BC,QAA3B,EAAqCC,QAArC,EACA;AAEI,mBAAeC,QAAf,GAA0B;AAEtB,UAAI;AACJ,cAAM;AAAEC,UAAAA,IAAI,EAAE;AAAEZ,YAAAA,KAAF;AAAUa,YAAAA;AAAV;AAAR,YAAgC,MAAMrB,KAAK,CAACsB,WAAD,CAAjD;AACAb,QAAAA,YAAY,CAACc,OAAb,CAAqB,OAArB,EAA8BT,IAAI,CAACU,SAAL,CAAehB,KAAf,CAA9B;AACAC,QAAAA,YAAY,CAACc,OAAb,CAAqB,IAArB,EAA2BF,OAA3B;AACApB,QAAAA,KAAK,CAACU,QAAN,CAAeC,OAAf,CAAuBC,aAAvB,GAAwC,SAAQL,KAAM,EAAtD;AAEAD,QAAAA,gBAAgB,CAAC,IAAD,CAAhB;AAEC,OARD,CAQE,OAAOkB,KAAP,EAAc;AACdvB,QAAAA,IAAI,CAAC,0BAAD,EAA6B,EAA7B,EAAiC,OAAjC,CAAJ;AACA;AACD;AACJ;;AACCiB,IAAAA,QAAQ,GAjBd,CAmBI;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACH;;AAED,sBACI,QAAC,OAAD,CAAS,QAAT;AAAkB,IAAA,KAAK,EAAE;AAAEb,MAAAA,aAAF;AAAiBU,MAAAA;AAAjB,KAAzB;AAAA,cACKX;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH;;GAxDQD,Y;;KAAAA,Y;AA0DT,SAASD,OAAT,EAAkBC,YAAlB","sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\r\nimport { login } from '../services/api/users';\r\nimport axios from '../config/axios'; \r\nimport swal from 'sweetalert';\r\n\r\nconst Context = createContext();\r\n\r\nfunction AuthProvider({ children }){\r\n\r\n    const [authenticated, setAuthenticated] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n    \r\n        if (token) {\r\n          axios.defaults.headers.Authorization = `Token ${JSON.parse(token)}`;\r\n          setAuthenticated(true);\r\n        }\r\n    \r\n    }, []);\r\n\r\n\r\n    async function handleLogin(username, password)\r\n    {\r\n\r\n        async function getItems() {\r\n         \r\n            try {\r\n            const { data: { token,  user_id} }  = await login(credentials)\r\n            localStorage.setItem('token', JSON.stringify(token))\r\n            localStorage.setItem('id', user_id)\r\n            axios.defaults.headers.Authorization = `Token ${token}`;\r\n    \r\n            setAuthenticated(true);\r\n          \r\n            } catch (error) {\r\n              swal(\"Opis ... ocorreu um erro\", \"\", \"error\");   \r\n              return;\r\n            }\r\n        }\r\n          getItems();\r\n        \r\n        // let credentials = { username, password };\r\n        // const { data: { token,  user_id} }  = await login(credentials)\r\n\r\n        // // if(token === null)\r\n        // // {\r\n        // //     swal(\"Falha durante autenticação\");\r\n        // //     return;\r\n        // // }\r\n\r\n        // localStorage.setItem('token', JSON.stringify(token))\r\n        // localStorage.setItem('id', user_id)\r\n        // axios.defaults.headers.Authorization = `Token ${token}`;\r\n\r\n        // setAuthenticated(true);\r\n    }\r\n\r\n    return (\r\n        <Context.Provider value={{ authenticated, handleLogin }}>\r\n            {children}\r\n        </Context.Provider>\r\n    )\r\n}\r\n\r\nexport { Context, AuthProvider};"]},"metadata":{},"sourceType":"module"}